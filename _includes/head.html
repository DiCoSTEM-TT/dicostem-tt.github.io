{% seo %}

<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="color-scheme" content="light dark" />

<!-- Aplicar tema (claro/oscuro) antes de pintar para evitar parpadeo -->
<script>
  (function () {
    var KEY="theme";
    var saved = localStorage.getItem(KEY);
    var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    document.documentElement.setAttribute('data-theme', saved || (prefersDark ? 'dark' : 'light'));
  })();
</script>

<!-- (Opcional) mejor rendimiento de fuentes -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}" />

<!-- Favicons -->
<link rel="icon" href="{{ '/assets/img/logos/favicon-dark.svg' | relative_url }}" type="image/svg+xml" media="(prefers-color-scheme: dark)">
<link rel="icon" href="{{ '/assets/img/logos/favicon.svg' | relative_url }}"       type="image/svg+xml" media="(prefers-color-scheme: light)">
<link rel="icon" href="{{ '/assets/img/logos/favicon-32.png' | relative_url }}" sizes="32x32" type="image/png">
<link rel="icon" href="{{ '/assets/img/logos/favicon-16.png' | relative_url }}" sizes="16x16" type="image/png">
<link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/img/logos/apple-touch-icon.png' | relative_url }}">
<link rel="manifest" href="{{ '/manifest.webmanifest' | relative_url }}">

<!-- Canonical + hreflang (dinámicos con translation_map) -->
{%- assign this = page.url | default: page.permalink | default: '/' -%}
{%- if this == '' -%}{%- assign this = '/' -%}{%- endif -%}
{%- assign chars = this | split: '' -%}
{%- assign lastchar = chars | last -%}
{%- unless lastchar == '/' -%}{%- assign this = this | append: '/' -%}{%- endunless -%}

<link rel="canonical" href="{{ site.url }}{{ this }}" />

{%- assign es_to_en = site.data.translation_map.es_to_en -%}
{%- assign en_to_es = site.data.translation_map.en_to_es -%}

{%- if this contains '/es/' and es_to_en and es_to_en[this] -%}
  <link rel="alternate" hreflang="es" href="{{ site.url }}{{ this }}" />
  <link rel="alternate" hreflang="en" href="{{ site.url }}{{ es_to_en[this] }}" />
  <link rel="alternate" hreflang="x-default" href="{{ site.url }}/" />
{%- elsif this contains '/en/' and en_to_es and en_to_es[this] -%}
  <link rel="alternate" hreflang="en" href="{{ site.url }}{{ this }}" />
  <link rel="alternate" hreflang="es" href="{{ site.url }}{{ en_to_es[this] }}" />
  <link rel="alternate" hreflang="x-default" href="{{ site.url }}/" />
{%- endif -%}

<!-- Theme color para barras del navegador -->
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />
<meta name="theme-color" content="#0e1116" media="(prefers-color-scheme: dark)" />

<!-- Analytics (elige SOLO uno) -->
<!-- GoatCounter (gratuito, sin cookies): cambia YOUR.goatcounter.com por tu subdominio o elimina esta línea -->
<script data-goatcounter="https://dicostem-tt.goatcounter.com/count" async src="https://gc.zgo.at/count.js"></script>
<!-- Plausible (SaaS sin cookies). Descomenta y ajusta el dominio si lo prefieres -->
<!-- <script defer data-domain="dicostem-tt.github.io" src="https://plausible.io/js/plausible.js"></script> -->

<!-- Altmetric badge (donut cuando hay DOI) -->
<script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script>
