{% assign current_lang = page.lang | default: site.lang | default: 'es' %}
{% assign nav_key = 'navigation_' | append: current_lang %}
{% assign nav = site.data[nav_key] | default: site.data.navigation_es %}

<header class="site-header">
  <div class="container topbar">
    <a class="logo" href="/{{ current_lang }}/">
      <img src="{{ '/assets/img/logos/DiCoSTEM-TT.svg' | relative_url }}" alt="DiCoSTEM-TT" />
      <div class="brand">
        <span class="project">DiCoSTEM-TT</span>
        <span class="claim">{{ site.claim[page.lang] | default: site.description }}</span>
      </div>
    </a>
    <div class="spacer"></div>
    {% include lang_switcher.html %}
    <button id="theme-toggle" aria-label="Cambiar tema" title="Cambiar tema" style="margin-left:.6rem;">🌓</button>
    {% if current_lang == 'es' %}
  {% assign search_url = '/es/buscar/' %}
  {% assign search_label = 'Buscar' %}
{% else %}
  {% assign search_url = '/en/search/' %}
  {% assign search_label = 'Search' %}
{% endif %}
<a class="search-link" href="{{ search_url | relative_url }}"
   aria-label="{{ search_label }}" title="{{ search_label }}">🔍 <span class="label">{{ search_label }}</span></a>

  </div>

  <nav class="site-nav subnav">
    <div class="container">
      {% for item in nav %}
        {% if item and item.url and item.title %}
          <a href="{{ item.url | relative_url }}"
             class="{% if page.url == item.url or page.permalink == item.url %}active{% endif %}">
            {{ item.title }}
          </a>
        {% endif %}
      {% endfor %}
    </div>
  </nav>
</header>
